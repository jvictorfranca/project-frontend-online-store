(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{28:function(e,t,a){e.exports=a(57)},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),o=a.n(c),i=(a(33),a(9)),l=a(1),u=a(2),s=a(7),m=a(4),d=a(3),p=a(14),h=a(5),b=(a(34),a(27)),f=a(8),E=a(19),v=(a(35),function(e){var t=e.product,a=t.id,n=t.title,c=t.thumbnail,o=t.price,i=t.available_quantity,l=t.quant,u=e.onAddClick,s=e.onSubClick,m=e.onRemoveClick,d=Object(E.a)(e,["product","onAddClick","onSubClick","onRemoveClick"]);return r.a.createElement("li",Object.assign({id:a,className:"cart-item-container"},d),r.a.createElement("button",{className:"btn remove",type:"button",onClick:m},r.a.createElement(f.f,{size:"2em"})),r.a.createElement("img",{src:c,alt:n,className:"item-thumbnail"}),r.a.createElement("span",{className:"item-name","data-testid":"shopping-cart-product-name"},n),r.a.createElement("div",{className:"cart-item-control"},r.a.createElement("button",{className:"btn","data-testid":"product-decrease-quantity",type:"button",onClick:s},r.a.createElement(f.b,{size:"2em"})),r.a.createElement("span",{className:"item-quantity","data-testid":"shopping-cart-product-quantity"},l),r.a.createElement("button",{className:"btn","data-testid":"product-increase-quantity",disabled:l>=i,type:"button",onClick:u},r.a.createElement(f.c,{size:"2em"}))),r.a.createElement("span",{className:"item-price"},Intl.NumberFormat("pt-Br",{style:"currency",currency:"BRL"}).format(o)))}),y=(a(36),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.cart,a=e.addToCart,n=e.subFromCart,c=e.removeFromCart,o=e.cartTotal;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"cart-header"},r.a.createElement(p.b,{to:"/"},r.a.createElement(f.d,{size:"2em"})),r.a.createElement("span",null,r.a.createElement(f.e,{className:"link-cart-icon",size:"2em"})),r.a.createElement("h1",null,"Carrinho de Compras")),r.a.createElement("ul",{className:"cart-items-list"},t.length?[].concat(Object(b.a)(t.map((function(e){return r.a.createElement(v,{key:e.id,product:e,onAddClick:function(){return a(e)},onSubClick:function(){return n(e)},onRemoveClick:function(){return c(e)}})}))),[r.a.createElement("h3",{key:"totalPrice"},"Valor Total da Compra: ".concat(o)),r.a.createElement(p.b,{key:"checkout","data-testid":"checkout-products",to:{pathname:"/finish",state:{products:t,sum:o}}},"Finish  your purchase")]):r.a.createElement("h2",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio")))}}]),a}(r.a.Component)),g=a(13),C=a.n(g),k=a(15),j=a(18),O=(a(46),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"freeShipping",value:function(e){var t=e.free_shipping;return!0===t?r.a.createElement("p",{"data-testid":"free-shipping"},"Frete Gratis "):r.a.createElement("p",null)}},{key:"render",value:function(){var e=this.props,t=e.product,a=e.addToCart,n=e.cart,c=t.id,o=t.title,i=t.price,l=t.thumbnail,u=t.shipping,s=Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i),m=n.map((function(e){return e.title}));return r.a.createElement("section",{"data-testid":"product",className:"product ".concat(m.includes(t.title)?"on-cart":"")},r.a.createElement("h1",null,o),r.a.createElement("img",{src:l,alt:"Product Thumbnail"}),r.a.createElement("p",null,s),this.freeShipping(u),r.a.createElement("div",{className:"info-cart-container"},r.a.createElement(p.b,{to:{pathname:"/product/".concat(c),state:{product:t}},"data-testid":"product-detail-link"},"More Info"),r.a.createElement("button",{className:"addcart-button","data-testid":"product-add-to-cart",type:"button",onClick:function(){return a(t)}},"Add to cart",r.a.createElement(f.a,{size:"2em",className:"cart-icon"}))))}}]),a}(r.a.Component)),N=(a(47),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.products,a=e.addToCart,n=e.cart;return 0===t.length?r.a.createElement("p",null,"Nenhum produto encontrado"):r.a.createElement("section",{className:"products-list"},t.map((function(e){return r.a.createElement(O,{addToCart:a,product:e,key:e.id,cart:n})})))}}]),a}(r.a.Component)),S=(a(48),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.quant;return r.a.createElement(p.b,{to:"/cart","data-testid":"shopping-cart-button"},r.a.createElement(f.e,{size:"2em",className:"link-cart-icon"}),r.a.createElement("div",{"data-testid":"shopping-cart-size"},e))}}]),a}(r.a.Component));function F(){return q.apply(this,arguments)}function q(){return(q=Object(k.a)(C.a.mark((function e(){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return x.apply(this,arguments)}function x(){return(x=Object(k.a)(C.a.mark((function e(t,a){var n,r,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="search?",t&&(n+="category=".concat(t||"")),a&&(n+="".concat(t?"&":"","q=").concat(a||"")),e.next=5,fetch("https://api.mercadolibre.com/sites/MLB/".concat(n));case 5:return r=e.sent,e.next=8,r.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(49);var B=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={categorias:[]},n.listaCategorias=n.listaCategorias.bind(Object(s.a)(n)),n.onCallback=n.onCallback.bind(Object(s.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.listaCategorias()}},{key:"onCallback",value:function(e){var t=e.target.value;(0,this.props.callback)(t)}},{key:"listaCategorias",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:t=e.sent,this.setState({categorias:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.categorias;return r.a.createElement("div",null,r.a.createElement("ul",{className:"category-list-container"},t.map((function(t){return r.a.createElement("li",{key:t.id,className:"category-list-item"},r.a.createElement("label",{htmlFor:t.name},t.name),r.a.createElement("input",{"data-testid":"category",onClick:e.onCallback,name:"categoria",type:"radio",id:t.name,value:t.id}))}))))}}]),a}(n.Component),A=(a(50),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={searching:"",category:"",products:[],doneSearching:!1,sorted:""},n.handleQuerry=n.handleQuerry.bind(Object(s.a)(n)),n.handleButton=n.handleButton.bind(Object(s.a)(n)),n.categorySearch=n.categorySearch.bind(Object(s.a)(n)),n}return Object(u.a)(a,[{key:"handleQuerry",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(j.a)({},a,n))}},{key:"handleButton",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t,a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.searching,n=t.category,e.next=3,T(n,a);case 3:r=e.sent,this.setState({products:r.results,doneSearching:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"categorySearch",value:function(e){var t=this;this.setState({category:e}),T(e,this.state.searching).then((function(e){t.setState({doneSearching:!0,products:e.results})}))}},{key:"sortProducts",value:function(e){var t=this.state.sorted;"ascending"===t?e.sort((function(e,t){return e.price-t.price})):"descending"===t&&e.sort((function(e,t){return t.price-e.price}))}},{key:"render",value:function(){var e=this.state,t=this.props,a=e.searching,n=e.products,c=e.doneSearching,o=e.sorted,i=t.addToCart,l=t.quant,u=t.cart;return this.sortProducts(n),r.a.createElement("main",{"data-testid":"home-initial-message",className:"main-container"},r.a.createElement("section",{className:"search-container"},r.a.createElement("input",{type:"text",onChange:this.handleQuerry,value:a,name:"searching","data-testid":"query-input"}),r.a.createElement("button",{onClick:this.handleButton,type:"button","data-testid":"query-button"},"Search"),r.a.createElement("select",{name:"sorted",id:"sorted",value:o,onChange:this.handleQuerry,className:"sorted-select"},r.a.createElement("option",{value:""},"Select by price"),r.a.createElement("option",{value:"ascending"},"Ascending price"),r.a.createElement("option",{value:"descending"},"Descending price")),r.a.createElement(S,{quant:l})),r.a.createElement("section",{className:"products-category-container"},c?r.a.createElement(N,{addToCart:i,products:n,cart:u}):r.a.createElement("p",{className:"empty-search-text"},"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement("aside",{className:"category-container"},r.a.createElement(B,{callback:this.categorySearch}))))}}]),a}(r.a.Component)),w=(a(51),function(e){var t=e.product,a=t.id,n=t.available_quantity,c=t.quant,o=e.onAddClick,i=e.onSubClick,l=e.onRemoveClick,u=Object(E.a)(e,["product","onAddClick","onSubClick","onRemoveClick"]);return r.a.createElement("li",Object.assign({id:a},u),r.a.createElement("button",{type:"button",onClick:l},r.a.createElement("p",null,"Apagar"),r.a.createElement(f.f,{size:"2em"})),r.a.createElement("span",{className:"cart-i"}),r.a.createElement("button",{disabled:c<=0,type:"button",onClick:i},r.a.createElement("p",null,"Retirar"),r.a.createElement(f.b,{size:"2em"})),r.a.createElement("button",{"data-testid":"product-detail-add-to-cart",disabled:c>=n,type:"button",onClick:o},r.a.createElement("p",null,"Adcionar"),r.a.createElement(f.c,{size:"2em"})))}),R=a(26),Q=a.n(R),z=(a(53),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={rating:0},n.onStarClick=n.onStarClick.bind(Object(s.a)(n)),n.formAceppt=n.formAceppt.bind(Object(s.a)(n)),n}return Object(u.a)(a,[{key:"onStarClick",value:function(e){this.setState({rating:e})}},{key:"formAceppt",value:function(e){e.preventDefault(),console.log("cliclou")}},{key:"render",value:function(){var e=this.state.rating;return r.a.createElement("form",{onSubmit:this.formAceppt},r.a.createElement("h3",null,"Avalia\xe7\xe3o"),r.a.createElement("div",{className:"form-container"},r.a.createElement("label",{htmlFor:"comment"},r.a.createElement("p",null,"Comentario"),r.a.createElement("textarea",{placeholder:"Mensagem (opcional)",className:"text-coments",type:"text",id:"comment","data-testid":"product-detail-evaluation"})),r.a.createElement("div",{className:"starCamp"},r.a.createElement("p",null,"Nota"),r.a.createElement(Q.a,{name:"rate1",starCount:5,value:e,onStarClick:this.onStarClick})),r.a.createElement("button",{className:"bnt-sub",type:"submit"},"Enviar")))}}]),a}(n.Component)),I=(a(54),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"freeShipping",value:function(e){var t=e.free_shipping;return!0===t?r.a.createElement("p",{"data-testid":"free-shipping"},"Frete Gratis "):r.a.createElement("p",null)}},{key:"render",value:function(){var e=this.props,t=e.location.state,a=e.addToCart,n=e.cartTotalItems,c=e.getProductQuantity,o=e.subFromCart,l=e.removeFromCart,u=t.product,s=u.id,m=u.title,d=u.thumbnail,p=u.price,h=u.shipping,b=u.condition,E=m,v=this.props.cartTotal,y=b;return r.a.createElement("main",null,r.a.createElement(S,{quant:n}),r.a.createElement("p",{"data-testid":"product-detail-name"},"Name: ".concat(m)),r.a.createElement("p",null,"ID: ".concat(s)),r.a.createElement("p",{className:"title-product hiden"},"ID: ".concat(s)),r.a.createElement("p",{className:"title-product"},"Pre\xe7o: $".concat(p)),r.a.createElement("div",{className:"container-img"},r.a.createElement("img",{src:d,alt:"Thumbnail",className:"img-cart"}),r.a.createElement("div",{className:"details"},r.a.createElement("h2",null,"Detalhes"),r.a.createElement("p",null,"Marca:",E),r.a.createElement("p",null,"Condi\xe7\xe3o:",y))),this.freeShipping(h),r.a.createElement("div",{className:"section-carrinho"},r.a.createElement("h2",null,"Carrinho",r.a.createElement(f.a,{size:"2em"})),r.a.createElement("h3",null,"Pre\xe7o do carrinho:",v,r.a.createElement("br",null),"Quantidade:",c(s)),r.a.createElement("div",{className:"bnts-cart"},r.a.createElement(w,{key:u.id,product:Object(i.a)(Object(i.a)({},u),{},{quant:c(s)}),onAddClick:function(){return a(Object(i.a)(Object(i.a)({},u),{},{quant:c(s)}))},onSubClick:function(){return o(Object(i.a)(Object(i.a)({},u),{},{quant:c(s)}))},onRemoveClick:function(){return l(Object(i.a)(Object(i.a)({},u),{},{quant:c(s)}))}}))),r.a.createElement(z,null))}}]),a}(r.a.Component)),L=(a(55),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.product,t=e.title,a=e.quant,n=e.price,c=n*a,o=Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n),i=Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c);return r.a.createElement("tr",{className:"product-checkout-container"},r.a.createElement("td",{className:"product-title"},t),r.a.createElement("td",null,"x",a),r.a.createElement("td",null,o),r.a.createElement("td",null,i))}}]),a}(r.a.Component)),P=(a(56),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={name:"",email:"",cpf:"",phone:"",cep:"",address:""},n.handleChange=n.handleChange.bind(Object(s.a)(n)),n.clickFinish=n.clickFinish.bind(Object(s.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(j.a)({},a,n))}},{key:"clickFinish",value:function(){var e=this.state,t=e.name,a=e.email,n=e.cpf,r=e.phone,c=e.cep,o=e.address;t.length>0&&a.length>0&&n.length>0&&r.length>0&&c.length>0&&o.length>0?this.setState({name:"",email:"",cpf:"",phone:"",cep:"",address:""}):console.log("H\xe1 campos vazios")}},{key:"render",value:function(){var e=this.props.location.state,t=e.products,a=e.sum,n=this.state,c=n.name,o=n.email,i=n.cpf,l=n.phone,u=n.cep,s=n.address;return r.a.createElement("main",null,r.a.createElement("h2",{className:"verify-data"}," Verify your purchase "),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Produto"),r.a.createElement("th",null,"Quantidade"),r.a.createElement("th",null,"Pre\xe7o"),r.a.createElement("th",null,"Total")),t.map((function(e){return r.a.createElement(L,{product:e,key:e.id})}))),r.a.createElement("p",{className:"total"},"Total price:"," ",a),r.a.createElement("form",null,r.a.createElement("h2",{className:"verify-data"}," Buyer info: "),r.a.createElement("label",{htmlFor:"name"},"Name:"," ",r.a.createElement("input",{type:"text",name:"name",id:"name","data-testid":"checkout-fullname",value:c,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"email"},"Email:"," ",r.a.createElement("input",{type:"text",name:"email",id:"email","data-testid":"checkout-email",value:o,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"cpf"},"CPF:"," ",r.a.createElement("input",{type:"text",name:"cpf",id:"cpf","data-testid":"checkout-cpf",value:i,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"phone"},"Phone:"," ",r.a.createElement("input",{type:"text",name:"phone",id:"phone","data-testid":"checkout-phone",value:l,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"cep"},"CEP:"," ",r.a.createElement("input",{type:"text",name:"cep",id:"cep","data-testid":"checkout-cep",value:u,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"address"},"Address:"," ",r.a.createElement("input",{type:"text",name:"address",id:"address","data-testid":"checkout-address",value:s,onChange:this.handleChange}))),r.a.createElement("button",{onClick:this.clickFinish,type:"button"}," Finish "))}}]),a}(r.a.Component)),D=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).addToCart=function(e){var t=n.state.cart,a=t.findIndex((function(t){var a=t.id;return e.id===a}));-1!==a?t[a].quant<t[a].available_quantity&&(t[a].quant+=1):t.push(Object(i.a)(Object(i.a)({},e),{},{quant:1})),n.setState({cart:t,total:n.cartTotal(t),quant:n.cartQuantity(t)}),n.animateButton()},n.removeFromCart=function(e){var t=n.state.cart.filter((function(t){return t.id!==e.id}));n.setState({cart:t,total:n.cartTotal(t),quant:n.cartQuantity(t)})},n.subFromCart=function(e){var t=n.state.cart;if(e.quant<=1)return n.removeFromCart(e);var a=t.map((function(t){return t.id===e.id?Object(i.a)(Object(i.a)({},t),{},{quant:t.quant-1}):t}));n.setState({cart:a,total:n.cartTotal(a),quant:n.cartQuantity(t)})},n.cartTotal=function(e){var t=e.reduce((function(e,t){return e+t.price*t.quant}),0);return Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)},n.getStateFromLocalStorage=function(){if(localStorage.shoppingCart){var e=localStorage.shoppingCart,t=JSON.parse(e),a=t.cart,r=t.total,c=t.quant;n.setState({cart:a,total:r,quant:c})}},n.cartQuantity=function(e){return e.reduce((function(e,t){return t.quant+e}),0)},n.productQuantityById=function(e){var t=n.state.cart.find((function(t){var a=t.id;return e===a}));return t?t.quant:0},n.updateLocalStorage=function(){var e=Object(s.a)(n).state,t=JSON.stringify(e);localStorage.shoppingCart=t},n.state={cart:[],total:"",quant:0},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getStateFromLocalStorage()}},{key:"componentDidUpdate",value:function(){this.updateLocalStorage()}},{key:"animateButton",value:function(){var e=document.getElementsByClassName("link-cart-icon");if(!e[0].classList.contains("animated")){e[0].classList.add("animated");setTimeout((function(){e[0].classList.remove("animated")}),1500)}}},{key:"render",value:function(){var e=this,t=this.state,a=t.cart,n=t.total,c=t.quant;return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(h.a,{exact:!0,path:"/project-frontend-online-store",render:function(){return r.a.createElement(A,{addToCart:e.addToCart,quant:c,cart:a})}}),r.a.createElement(h.a,{path:"/cart",render:function(){return r.a.createElement(y,{cartTotal:n,addToCart:e.addToCart,subFromCart:e.subFromCart,removeFromCart:e.removeFromCart,cart:a})}}),r.a.createElement(h.a,{path:"/product/:id",render:function(t){return r.a.createElement(I,Object.assign({removeFromCart:e.removeFromCart,subFromCart:e.subFromCart,addToCart:e.addToCart,cart:a,cartTotal:n},t,{cartTotalItems:c,getProductQuantity:e.productQuantityById}))}}),r.a.createElement(h.a,{path:"/finish",component:P})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.d9a4e44d.chunk.js.map